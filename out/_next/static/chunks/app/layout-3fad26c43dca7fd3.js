(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{17275:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}},19324:()=>{},20245:(e,t,r)=>{Promise.resolve().then(r.bind(r,42500)),Promise.resolve().then(r.t.bind(r,62353,23)),Promise.resolve().then(r.t.bind(r,17275,23)),Promise.resolve().then(r.t.bind(r,19324,23)),Promise.resolve().then(r.bind(r,31530))},42500:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>i,A:()=>c});var a=r(95155),s=r(12115),o=r(31530),l=r(64767);r(74228),r(51931),r(23464).A.create({baseURL:"https://rpc-nebulas-testnet.uniultra.xyz",headers:{"Content-Type":"application/json"},timeout:3e4});let n=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0),d=async e=>{try{u(!0);let t=await l.Z.login(e);if((null==t?void 0:t.token)&&(null==t?void 0:t.safeUser))return localStorage.setItem("authToken",t.token),localStorage.setItem("user",JSON.stringify(t.safeUser)),i(t.safeUser),o.oR.success("Welcome back, ".concat(t.safeUser.email,"!")),{success:!0};throw Error("Invalid response from server")}catch(a){var t,r;console.error("Login error:",a);let e=(null==(r=a.response)||null==(t=r.data)?void 0:t.message)||"Failed to login. Please try again.";return o.oR.error(e),{success:!1,error:e}}finally{u(!1)}},m=async e=>{try{return u(!0),await l.Z.register(e),o.oR.success("Account created successfully!"),await d({email:e.email,password:e.password})}catch(a){var t,r;console.error("Registration error:",a);let e=(null==(r=a.response)||null==(t=r.data)?void 0:t.message)||"Failed to register. Please try again.";return o.oR.error(e),{success:!1,error:e}}finally{u(!1)}};return(0,s.useEffect)(()=>{(()=>{let e=localStorage.getItem("authToken"),t=localStorage.getItem("user");if(e&&t)try{let e=JSON.parse(t);i(e)}catch(e){localStorage.removeItem("authToken"),localStorage.removeItem("user")}u(!1)})()},[]),(0,a.jsx)(n.Provider,{value:{user:r,isAuthenticated:!!r,isLoading:c,isAdmin:null==r?void 0:r.isAdmin,logout:()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user"),i(null),o.oR.success("Logged out successfully")},login:d,register:m},children:t})},c=()=>{let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},46520:(e,t,r)=>{"use strict";r.d(t,{p:()=>a});let a="https://payzoll-server-pharos.onrender.com"},51931:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(74228);let s={subscribeToNewsletter:async e=>{try{return(await a.A.post("/email/subscribe",e)).data}catch(e){return console.error("Newsletter subscription error:",e),{success:!1,message:e.message||"Failed to subscribe to newsletter",error:e.toString()}}},joinWaitlist:async e=>{try{return(await a.A.post("/email/waitlist",e)).data}catch(e){return console.error("Waitlist registration error:",e),{success:!1,message:e.message||"Failed to join waitlist",error:e.toString()}}}}},62353:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_188709",variable:"__variable_188709"}},64767:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(74228);let s={login:async e=>{var t,r;let s=await a.A.post("/auth/login",e);return(null==(t=s.data)?void 0:t.token)&&localStorage.setItem("authToken",s.data.token),(null==(r=s.data)?void 0:r.safeUser)&&localStorage.setItem("user",JSON.stringify(s.data.safeUser)),console.log("Login response:",s.data),s.data},register:async e=>(await a.A.post("/auth/register",e)).data,forgotPassword:async e=>(await a.A.post("/auth/forgotPassword",{email:e})).data,ping:async()=>(await a.A.post("/auth/ping")).data}},74228:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(23464);let s=r(46520).p,o=a.A.create({baseURL:s,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let t=localStorage.getItem("authToken");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>{let{response:t}=e;return(null==t?void 0:t.status)===401&&(localStorage.removeItem("authToken"),window.location.href="/"),Promise.reject({status:null==t?void 0:t.status,message:"object"==typeof(null==t?void 0:t.data)&&(null==t?void 0:t.data)&&"message"in t.data?t.data.message:"An unexpected error occurred",data:null==t?void 0:t.data,originalError:e})});let l=o}},e=>{var t=t=>e(e.s=t);e.O(0,[5555,2533,4134,1530,3464,8441,1684,7358],()=>t(20245)),_N_E=e.O()}]);